OASISFormat:                    0.3
OCamlVersion:                   >= 3.12
Name:                           elkhound
Version:                        0.1
Synopsis:                       Elkhound GLR Parser Generator
Authors:                        Pippijn van Steenhoven
License:                        GPL
LicenseFile:                    COPYING
Plugins:                        META (0.3),
                                StdFiles (0.3),
                                DevFiles (0.3)
XStdFilesAUTHORS:               false
XStdFilesINSTALLFilename:       INSTALL
XStdFilesREADME:                false

SourceRepository head
        Type:                   git
        Location:               git://git.xinutec.org/lang/cxxparse.git
        Browser:                http://xinutec.org/git/lang/cxxparse.git


Executable re2ml
        Path:                   src/re2ml
        BuildTools:             ocamlbuild,camlp4o
        BuildDepends:           baselib,codegen,                        # internal
                                batteries                               # external
        CompiledObject:         native
        MainIs:                 ml/re2ml.ml
        NativeOpt:              -inline 0

Executable elkhound
        Path:                   src/elkhound
        BuildTools:             ocamlbuild,camlp4o
        BuildDepends:           gramanl,                                # internal
                                batteries                               # external
        CompiledObject:         native
        MainIs:                 elkhound.ml

Executable cpapa
        Path:                   src/cpapa
        BuildTools:             ocamlbuild
        BuildDepends:           ccparse
        CompiledObject:         native
        MainIs:                 cpapa.ml

Executable treematch
        Path:                   src/treematch
        BuildTools:             ocamlbuild,camlp4of
        BuildDepends:           baselib,                                # internal
                                camlp4,camlp4.lib,                      # core
                                batteries,sexplib                       # external
        CompiledObject:         native
        MainIs:                 treematch.ml

Executable runtests
        Path:                   testsuite
        BuildTools:             ocamlbuild
        BuildDepends:           baselib,testing                         # internal
        CompiledObject:         native
        MainIs:                 runtests.ml

Executable arith
        Path:                   testsuite/elkhound/arith
        BuildTools:             ocamlbuild,camlp4o
        BuildDepends:           glr,                                    # internal
                                sexplib                                 # external
        CompiledObject:         native
        MainIs:                 arith.ml

Executable sless
        Path:                   testsuite/elkhound/scannerless
        BuildTools:             ocamlbuild,camlp4o
        BuildDepends:           glr,                                    # internal
                                sexplib                                 # external
        CompiledObject:         native
        MainIs:                 sless.ml


Library gramanl
        Path:                   src/gramanl
        Pack:                   true
        BuildTools:             ocamlbuild,camlp4of
        BuildDepends:           baselib,glr,codegen,                    # internal
                                unix,camlp4,camlp4.lib,                 # core
                                batteries,sexplib,ocamlgraph            # external
        CompiledObject:         native
#        NativeOpt:              -inline 999 -unsafe -noassert
        Modules:                Gramanl_info
        InternalModules:        ml/AnalysisEnv,
                                ml/AnalysisEnvType,
                                ml/Assoc,
                                ml/BackTransform,
                                ml/BfsTree,
                                ml/ConflictResolution,
                                ml/Derivability,
                                ml/DottedProduction,
                                ml/EmitActions,
                                ml/EmitCode,
                                ml/EmitNames,
                                ml/EmitPtree,
                                ml/EmitTables,
                                ml/EmitTokens,
                                ml/EmitTreematch,
                                ml/FirstSets,
                                ml/FollowSets,
                                ml/GrammarAnalysis,
                                ml/GrammarAst,
                                ml/GrammarGraph,
                                ml/GrammarIndex,
                                ml/GrammarLexer,
                                ml/GrammarParser,
                                ml/GrammarSig,
                                ml/GrammarStructure,
                                ml/GrammarTreeParser,
                                ml/GrammarType,
                                ml/GrammarUtil,
                                ml/Ids,
                                ml/ItemList,
                                ml/ItemSet,
                                ml/LrItem,
                                ml/LrItemSets,
                                ml/Merge,
                                ml/Nonterminal,
                                ml/NonterminalSet,
                                ml/NtArray,
                                ml/NtSet,
                                ml/Options,
                                ml/OutputMenhir,
                                ml/PrintAnalysisEnv,
                                ml/PrintAst,
                                ml/PrintGrammar,
                                ml/ProdArray,
                                ml/PtreeMaker,
                                ml/PtreeStructure,
                                ml/PtreeType,
                                ml/Reachability,
                                ml/Renumbering,
                                ml/SampleInput,
                                ml/Semantic,
                                ml/SemanticVariant,
                                ml/StateGraph,
                                ml/SuperSets,
                                ml/TableConstruction,
                                ml/TableEncoding,
                                ml/TablePrinting,
                                ml/TermArray,
                                ml/TermSet,
                                ml/Terminal,
                                ml/TerminalSet,
                                ml/Warnings

Library ccparse
        Path:                   src/ccparse
        Pack:                   true
        BuildTools:             ocamlbuild,ocamllex
        BuildDepends:           baselib,glr,ccabs,                      # internal
                                unix                                    # core
        CompiledObject:         native
#        NativeOpt:              -inline 999 -unsafe -noassert
        Modules:                Ccparse_info
        InternalModules:        gr/CcActions,
                                gr/CcPtree,
                                gr/CcPtreeActions,
                                gr/CcTables,
                                gr/CcTokens,
                                gr/CcTreematch,
                                gr/CcTreematchActions,
                                ml/Cc_keywords,
                                ml/Factory,
                                ml/Lexer,
                                ml/Options,
                                ml/Parser,
                                tok/Cc_tokens

Library cabs
        Path:                   src/cabs
        Pack:                   true
        BuildTools:             ocamlbuild,camlp4o
        BuildDepends:           batteries,sexplib                       # external
        CompiledObject:         native
#        NativeOpt:              -inline 999 -unsafe -noassert
        Modules:                ml/Ast,
                                ml/Constant,
                                ml/Sclass,
                                ml/Tqual

Library ccabs
        Path:                   src/ccabs
        Pack:                   true
        BuildTools:             ocamlbuild,camlp4o
        BuildDepends:           batteries,sexplib,monad-custom          # external
        CompiledObject:         native
#        NativeOpt:              -inline 999 -unsafe -noassert
        Modules:                ml/Ast,
                                ml/Disambiguation,
                                ml/Flags,
                                ml/Query

Library glr
        Path:                   src/glr
        Pack:                   true
        BuildTools:             ocamlbuild
        BuildDepends:           baselib                                 # internal
        CompiledObject:         native
#        NativeOpt:              -inline 999 -unsafe -noassert
        Modules:                Glr_info
        InternalModules:        ml/Arraystack,
                                ml/Objpool,
                                ml/Options,
                                ml/ParseTables,
                                ml/Easy,
                                ml/Engine,
                                ml/Lexerint,
                                ml/ParseTablesType,
                                ml/PtreeActions,
                                ml/PtreeNode,
                                ml/SemanticValue,
                                ml/SourceLocation,
                                ml/TokenInfo,
                                ml/UserActions

Library codegen
        Path:                   src/codegen
        BuildTools:             ocamlbuild,camlp4o
        BuildDepends:           baselib,                                # internal
                                camlp4,camlp4.lib,                      # core
                                sexplib                                 # external
        CompiledObject:         native
#        NativeOpt:              -inline 999 -unsafe -noassert
        Modules:                CamlAst,
                                Classify,
                                Diagnostics,
                                LocStringMap,
                                Sloc,
                                SlocMap

Library baselib
        Path:                   src/baselib
        BuildTools:             ocamlbuild,camlp4o
        BuildDepends:           batteries,sexplib                       # external
        CompiledObject:         native
#        NativeOpt:              -inline 999 -unsafe -noassert
        CCLib:                  -lstdc++ -lz
        CSources:               ml_BitSet.c,
                                ml_Sched.c,
                                ml_Valgrind.c,
                                ml_Zlib.c
        Modules:                BaseOptions,
                                Bit2d,
                                BitSet,
                                CharMap,
                                Cmdline,
                                DenseIntMap,
                                ExtArray,
                                ExtFormat,
                                ExtList,
                                ExtString,
                                HashStack,
                                IntegralModule,
                                Levenshtein,
                                Sched,
                                SexpChar,
                                SexpHashtbl,
                                SexpMap,
                                SexpSet,
                                SexpString,
                                Sig,
                                SparseBitSet,
                                StringMap,
                                StringSet,
                                TermColour,
                                Timing,
                                Valgrind,
                                Zlib


Library testing
        Path:                   src/testing
        BuildTools:             ocamlbuild
        BuildDepends:           baselib,                                # internal
                                unix,                                   # core
                                batteries                               # external
        CompiledObject:         native
#        NativeOpt:              -inline 999 -unsafe -noassert
        Modules:                Framework


Test runtests
        TestTools:              runtests
        Command:                _build/testsuite/runtests.native
