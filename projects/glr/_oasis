OASISFormat:                    0.3
OCamlVersion:                   >= 3.12
Name:                           glr
Version:                        0.1
Synopsis:                       GLR parser generator
Authors:                        Pippijn van Steenhoven
License:                        GPL
LicenseFile:                    COPYING
Plugins:                        META (0.3),
                                StdFiles (0.3),
                                DevFiles (0.3)
XStdFilesAUTHORS:               false
XStdFilesINSTALLFilename:       INSTALL
XStdFilesREADME:                false

SourceRepository head
        Type:                   git
        Location:               git://git.xinutec.org/devel/codegen.git
        Browser:                http://xinutec.org/git/devel/codegen.git


########################################################################
## :: Tools
########################################################################

Executable elkhound
        Path:                   src/elkhound
        BuildTools:             ocamlbuild,camlp4o
        BuildDepends:           gramanl,                                # internal
                                camlp4.fulllib,                         # core
                                batteries                               # external
        CompiledObject:         native
        MainIs:                 elkhound.ml


########################################################################
## :: Libraries
########################################################################

Library glr
        Path:                   src/glr
        Pack:                   true
        BuildTools:             ocamlbuild
        BuildDepends:           baselib
        CompiledObject:         native
#        NativeOpt:              -inline 999 -unsafe -noassert
        Modules:                Glr_info
        InternalModules:        ml/Arraystack,
                                ml/Objpool,
                                ml/Options,
                                ml/ParseTables,
                                ml/Easy,
                                ml/Engine,
                                ml/Lexerint,
                                ml/ParseTablesType,
                                ml/PtreeActions,
                                ml/PtreeNode,
                                ml/SemanticValue,
                                ml/SourceLocation,
                                ml/TokenInfo,
                                ml/UserActions

Library gramanl
        Path:                   src/gramanl
        Pack:                   true
        BuildTools:             ocamlbuild,camlp4of
        BuildDepends:           baselib,glr,codegen,                    # internal
                                unix,camlp4.fulllib,                    # core
                                batteries,sexplib,ocamlgraph            # external
        CompiledObject:         native
#        NativeOpt:              -inline 999 -unsafe -noassert
        Modules:                Gramanl_info
        InternalModules:        ml/AnalysisEnv,
                                ml/AnalysisEnvType,
                                ml/Assoc,
                                ml/BackTransform,
                                ml/BfsTree,
                                ml/ConflictResolution,
                                ml/Derivability,
                                ml/DottedProduction,
                                ml/EmitActions,
                                ml/EmitCode,
                                ml/EmitNames,
                                ml/EmitPtree,
                                ml/EmitTables,
                                ml/EmitTokens,
                                ml/EmitTreematch,
                                ml/FirstSets,
                                ml/FollowSets,
                                ml/GrammarAnalysis,
                                ml/GrammarAst,
                                ml/GrammarGraph,
                                ml/GrammarIndex,
                                ml/GrammarLexer,
                                ml/GrammarParser,
                                ml/GrammarSig,
                                ml/GrammarStructure,
                                ml/GrammarTreeParser,
                                ml/GrammarType,
                                ml/GrammarUtil,
                                ml/Ids,
                                ml/ItemList,
                                ml/ItemSet,
                                ml/LrItem,
                                ml/LrItemSets,
                                ml/Merge,
                                ml/Nonterminal,
                                ml/NonterminalSet,
                                ml/NtArray,
                                ml/NtSet,
                                ml/Options,
                                ml/OutputMenhir,
                                ml/PrintAnalysisEnv,
                                ml/PrintAst,
                                ml/PrintGrammar,
                                ml/ProdArray,
                                ml/PtreeMaker,
                                ml/PtreeStructure,
                                ml/PtreeType,
                                ml/Reachability,
                                ml/Renumbering,
                                ml/SampleInput,
                                ml/Semantic,
                                ml/SemanticVariant,
                                ml/StateGraph,
                                ml/SuperSets,
                                ml/TableConstruction,
                                ml/TableEncoding,
                                ml/TablePrinting,
                                ml/TermArray,
                                ml/TermSet,
                                ml/Terminal,
                                ml/TerminalSet,
                                ml/Warnings


########################################################################
## :: Test utilities
########################################################################

Executable arith
        Path:                   testsuite/elkhound/arith
        BuildTools:             ocamlbuild,camlp4o
        BuildDepends:           glr,                                    # internal
                                sexplib                                 # external
        CompiledObject:         native
        Install:		false
        MainIs:                 arith.ml

Executable sless
        Path:                   testsuite/elkhound/scannerless
        BuildTools:             ocamlbuild,camlp4o
        BuildDepends:           glr,                                    # internal
                                sexplib                                 # external
        CompiledObject:         native
        Install:		false
        MainIs:                 sless.ml


########################################################################
## :: Testsuite
########################################################################

Executable runtests
        Path:                   testsuite
        BuildTools:             ocamlbuild
        BuildDepends:           baselib                                 # internal
        CompiledObject:         native
        Install:		false
        MainIs:                 runtests.ml

Test runtests
        TestTools:              runtests
        Command:                _build/testsuite/runtests.native
